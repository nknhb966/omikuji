<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>スマホおみくじ</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: linear-gradient(#fff6e5, #ffe4c4);
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  overflow: hidden;
}

.container {
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

h1 {
  font-size: 32px;
}

button {
  font-size: 22px;
  padding: 16px 40px;
  border-radius: 30px;
  border: none;
  background: #ff7a18;
  color: white;
}

button:active {
  transform: scale(0.96);
}

#result {
  margin-top: 30px;
  text-align: center;
  display: none;
}

#fortune {
  font-size: 48px;
  margin-bottom: 10px;
}

.detail {
  font-size: 16px;
  margin: 6px 0;
}

/* 紙吹雪 */
.confetti {
  position: absolute;
  left: 0;
  top: 0;
  width: 10px;
  height: 18px;
  opacity: 0.95;
  pointer-events: none;
}
</style>
</head>

<body>
<div class="container">
  <h1>おみくじ</h1>
  <button onclick="draw()">ひく</button>

  <div id="result">
    <div id="fortune"></div>
    <div id="health" class="detail"></div>
    <div id="love" class="detail"></div>
    <div id="work" class="detail"></div>
    <div id="study" class="detail"></div>
  </div>
</div>

<script>
/* ===== おみくじデータ（18種） ===== */
const fortunes = [
  { name:"超大吉", health:"絶好調", love:"最高の流れ", work:"一気に進む", study:"吸収力MAX" },
  { name:"大大吉", health:"元気いっぱい", love:"素直が吉", work:"評価される", study:"応用◎" },
  { name:"大吉",   health:"快調", love:"笑顔が鍵", work:"自信OK", study:"集中力UP" },

  { name:"向上中吉", health:"回復中", love:"距離が縮まる", work:"準備が吉", study:"復習◎" },
  { name:"安定中吉", health:"安定", love:"落ち着く", work:"順調", study:"基礎固め" },
  { name:"中吉",     health:"無理なし", love:"会話大切", work:"協力が鍵", study:"コツコツ" },

  { name:"ほのぼの小吉", health:"リラックス", love:"優しさ◎", work:"丁寧に", study:"マイペース" },
  { name:"回復小吉",     health:"少しずつ", love:"安心感", work:"立て直し", study:"見直し" },
  { name:"小吉",         health:"睡眠大事", love:"焦らず", work:"小さな成功", study:"短時間" },

  { name:"にこにこ吉", health:"笑顔◎", love:"楽しい", work:"雰囲気良し", study:"継続力" },
  { name:"じっくり吉", health:"無理せず", love:"様子見", work:"慎重に", study:"積み重ね" },
  { name:"吉",         health:"自然体", love:"自然体", work:"計画重視", study:"基本" },

  { name:"ゆっくり末吉", health:"休憩を", love:"距離感", work:"ペース調整", study:"焦らず" },
  { name:"末吉",         health:"疲れ注意", love:"聞き役", work:"確認大事", study:"復習" },
  { name:"凶",           health:"無理しない", love:"自分優先", work:"慎重第一", study:"できる所から" }
];

/* ===== おみくじを引く ===== */
function draw() {
  result.style.display = "none";

  setTimeout(() => {
    const f = fortunes[Math.floor(Math.random() * fortunes.length)];

    fortune.textContent = f.name;
    health.textContent = "健康： " + f.health;
    love.textContent   = "恋愛： " + f.love;
    work.textContent   = "仕事： " + f.work;
    study.textContent  = "勉強： " + f.study;

    result.style.display = "block";

    for (let i = 0; i < 120; i++) {
      launchConfetti();
    }
  }, 1000);
}

/* ===== クラッカー式・紙吹雪 ===== */
function launchConfetti() {
  const c = document.createElement("div");
  c.className = "confetti";
  c.style.backgroundColor =
    `hsl(${Math.random() * 360}, 100%, 60%)`;

  // クラッカー位置（左右下）
  const fromLeft = Math.random() < 0.5;
  let x = fromLeft ? 0 : window.innerWidth;
  let y = window.innerHeight * 0.75;

  // 初速（パン！）
  let vx = (fromLeft ? 1 : -1) * (7 + Math.random() * 7);
  let vy = -12 - Math.random() * 6;

  // 物理パラメータ
  const gravity = 0.4;
  const air = 0.992;
  const sway = Math.random() * 0.15 + 0.05;
  let angle = Math.random() * Math.PI * 2;

  document.body.appendChild(c);

  function update() {
    // 空気抵抗＋重力
    vx *= air;
    vy = vy * air + gravity;

    // ひらひら
    angle += sway;
    x += vx + Math.sin(angle) * 1.5;
    y += vy;

    // transform のみで位置管理（重要）
    c.style.transform =
      `translate(${x}px, ${y}px) rotate(${angle * 180 / Math.PI}deg)`;

    if (y < window.innerHeight + 120) {
      requestAnimationFrame(update);
    } else {
      c.remove();
    }
  }

  requestAnimationFrame(update);
}
</script>
</body>
</html>
